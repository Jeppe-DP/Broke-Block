classDiagram

    class Game {
        +static World world
        +static Context context
        +static Registry registry
        +static ICommand fallback
        +Main(string[] args)
        +GetWorld() : World
        +static InitRegistry()
        +static GetWorld() : World
    }

    class Context {
        -Space current
        -bool done
        +Context(Space)
        +GetCurrent() : Space
        +Transition(string)
        +MakeDone()
        +IsDone() : bool
    }

    class Registry {
        -Context context
        -ICommand fallback
        -Dictionary~string, ICommand~ commands
        +Register(string, ICommand)
        +Dispatch(string)
        +GetCommand(string) : ICommand
        +GetCommandNames() : string[]
    }

    class ICommand {
        +Execute(Context, string, string[])
        +GetDescription() string
    }

    class BaseCommand {
        #string description
        #GuardEq(string[], int) bool
        +GetDescription() string
    }

    class CommandExit {
        +Execute(Context, string, string[])
    }

    class CommandShow {
        +Execute(Context, string, string[])
    }

    class CommandGo {
        +Execute(Context, string, string[])
    }

    class CommandHelp {
        -Registry registry
        +Execute(Context, string, string[])
    }

    class CommandTake {
        +Execute(Context, string, string[])
    }

    class CommandUnknown {
        +Execute(Context, string, string[])
    }

    class World {
        -Space start
        +World()
        +GetEntry() : Space
    }

    class Node {
        -string name
        -Dictionary~string, Node~ edges
        -List~Item~ items
        +GetName() string
        +AddEdge(string, Node)
        +FollowEdge(string) Node
        +AddItem(Item)
        +PickUpItem(string) Item
    }

    class Space {
        +bool HasWon
        +GetDescription() string
        +Welcome()
        +Goodbye()
        +FollowEdge(string) Space
    }

    class Item {
        +string Name
        +Item(string)
        +ToString() string
    }

    class Material {
        -int træ
        -int metal
        -int mad
        +GetTræ() int
        +AddTræ(int)
        +RemoveTræ(int)
        +...()
    }

    class Tool {
        +Tool(string)
    }

    class Inventory {
        -static List~Item~ inventory
        +Add(Item)
        +PrintInventory()
    }

    BaseCommand <|-- CommandExit
    BaseCommand <|-- CommandShow
    BaseCommand <|-- CommandGo
    BaseCommand <|-- CommandHelp
    BaseCommand <|-- CommandTake
    BaseCommand <|-- CommandUnknown

    Node <|-- Space
    Item <|-- Material
    Item <|-- Tool

    ICommand <|.. CommandExit
    ICommand <|.. CommandShow
    ICommand <|.. CommandGo
    ICommand <|.. CommandHelp
    ICommand <|.. CommandTake
    ICommand <|.. CommandUnknown

    Game --> World
    Game --> Registry
    Game --> Context

    Context --> Space
    Registry --> Context
    Registry --> ICommand

    Space --> Item
    Space --> Game

    Inventory --> Item
    Node --> Item
    World --> Space : start
